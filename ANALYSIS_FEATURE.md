# 收藏夹数据分析功能

## 功能概述

收藏夹数据分析功能为用户提供了全面的B站收藏夹数据洞察，包括统计信息、分布分析、趋势图表等功能。

## 功能特性

### 📊 数据统计
- **总收藏夹数量**: 显示用户创建的收藏夹总数
- **总视频数量**: 显示所有收藏夹中的视频总数
- **最近收藏**: 显示最近7天内的收藏数量
- **最活跃收藏夹**: 显示视频数量最多的收藏夹

### 📈 数据可视化
- **饼图**: 展示各收藏夹视频数量占比
- **柱状图**: 显示TOP 10收藏夹排行
- **趋势图**: 展示收藏数量随时间变化趋势
- **累计图**: 显示累计收藏数量增长

### 🔧 交互功能
- **时间范围筛选**: 支持最近7天、30天、90天的数据查看
- **数据刷新**: 手动刷新最新数据
- **数据导出**: 将分析结果导出为JSON文件

## 使用方法

### 在Options页面使用
1. 点击扩展图标，打开弹窗
2. 点击"设置"标签页
3. 选择"收藏夹数据分析"标签
4. 查看各种数据分析图表

### 在Popup弹窗使用
1. 点击扩展图标，打开弹窗
2. 点击"分析"标签页
3. 查看简化版数据分析

## 技术实现

### 核心技术栈
- **React 19**: 前端框架
- **TypeScript**: 类型安全
- **ECharts**: 数据可视化
- **Tailwind CSS**: 样式框架
- **Zustand**: 状态管理

### 组件架构
```
src/components/analysis/
├── AnalysisTab.tsx          # 弹窗版分析组件
├── OptionsAnalysisTab.tsx    # Options页面版分析组件
├── StatsCards.tsx          # 统计卡片组件
├── DistributionChart.tsx   # 分布图组件（饼图/环形图）
├── BarChart.tsx           # 柱状图组件
├── TrendChart.tsx          # 趋势图组件
└── index.ts               # 组件导出
```

### 数据流程
1. 从Zustand store获取收藏夹数据
2. 计算统计数据和分布数据
3. 生成模拟趋势数据（未来可接入真实API）
4. 使用ECharts渲染图表
5. 支持数据导出功能

## 未来规划

### 🚀 即将实现的功能
- **活跃度分析**: 
  - 收藏时间段分析（一天中哪个时间段最活跃）
  - 收藏频率统计（每周/每月收藏趋势）
  - 活跃度排行榜

- **智能洞察**:
  - 基于AI的内容分析
  - 视频标题关键词提取
  - 收藏夹智能分类建议
  - 重复内容检测

- **高级功能**:
  - 收藏夹健康度分析
  - UP主关注分析
  - 视频类型分布
  - 收藏行为模式识别

### 📱 用户体验优化
- 响应式设计优化
- 图表交互增强
- 数据筛选功能完善
- 导出格式扩展（PDF、Excel）

## 开发指南

### 添加新的图表类型
1. 在`src/components/analysis/`目录下创建新的图表组件
2. 使用ECharts实现图表逻辑
3. 在`AnalysisTab.tsx`中集成新组件
4. 更新导出文件`index.ts`

### 数据处理扩展
1. 修改`calculateStats`函数添加新的统计指标
2. 更新`StatsData`接口定义
3. 在`StatsCards.tsx`中添加新的统计卡片

### API集成
1. 在`src/utils/api.ts`中添加新的API函数
2. 在分析组件中调用API获取真实数据
3. 更新数据类型定义

## 故障排除

### 常见问题
1. **图表不显示**: 检查ECharts是否正确加载，数据格式是否正确
2. **数据为空**: 确保已登录B站账号，收藏夹数据已正确获取
3. **导出失败**: 检查浏览器是否支持文件下载功能

### 调试技巧
1. 打开浏览器开发者工具查看控制台错误
2. 检查Network面板确认API请求状态
3. 使用React DevTools查看组件状态

## 贡献指南

欢迎提交Issue和Pull Request来改进这个功能！

### 提交规范
- 使用清晰的提交信息
- 确保代码通过TypeScript检查
- 添加必要的测试用例
- 更新相关文档

---

*该功能持续更新中，敬请期待更多精彩功能！*